# ML Pipeline Environment Configuration
# Copy this file to .env and update with your values

# ============================================================================
# MLflow Configuration
# ============================================================================
MLFLOW_TRACKING_URI=http://localhost:5000
MLFLOW_EXPERIMENT_NAME=image_classification_pipeline
MLFLOW_S3_ENDPOINT_URL=http://localhost:9000

# ============================================================================
# MinIO / S3 Configuration
# ============================================================================
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin

# ============================================================================
# PostgreSQL Configuration
# ============================================================================
POSTGRES_USER=mlflow
POSTGRES_PASSWORD=mlflow
POSTGRES_DB=mlflow
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# Database URLs
MLFLOW_BACKEND_STORE_URI=postgresql://mlflow:mlflow@localhost:5432/mlflow
AIRFLOW_DATABASE_URL=postgresql://mlflow:mlflow@localhost:5432/airflow

# ============================================================================
# Redis Configuration
# ============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# ============================================================================
# Airflow Configuration
# ============================================================================
AIRFLOW__CORE__EXECUTOR=CeleryExecutor
AIRFLOW__CORE__FERNET_KEY=your-fernet-key-here
AIRFLOW__WEBSERVER__SECRET_KEY=your-secret-key-here
AIRFLOW__CORE__DAGS_ARE_PAUSED_AT_CREATION=true
AIRFLOW__CORE__LOAD_EXAMPLES=false

# Airflow Celery
AIRFLOW__CELERY__BROKER_URL=redis://localhost:6379/0
AIRFLOW__CELERY__RESULT_BACKEND=db+postgresql://mlflow:mlflow@localhost:5432/airflow

# ============================================================================
# Data Paths (for local development)
# ============================================================================
RAW_DATA_PATH=./data/raw
PROCESSED_DATA_PATH=./data/processed
MODEL_SAVE_PATH=./models
ARTIFACTS_PATH=./artifacts
PLOTS_PATH=./plots

# ============================================================================
# DVC Configuration
# ============================================================================
DVC_REMOTE_NAME=minio
DVC_REMOTE_URL=s3://dvc-storage
DVC_REMOTE_ENDPOINT_URL=http://localhost:9000

# ============================================================================
# Model Training Configuration
# ============================================================================
# Default hyperparameters (can be overridden in code)
DEFAULT_MODEL_NAME=resnet18
DEFAULT_NUM_EPOCHS=20
DEFAULT_BATCH_SIZE=32
DEFAULT_LEARNING_RATE=0.001
DEFAULT_OPTIMIZER=adam
DEFAULT_EARLY_STOPPING_PATIENCE=5

# ============================================================================
# Data Configuration
# ============================================================================
REQUIRED_COLUMNS=image_path,label
TEST_SIZE=0.2
VAL_SIZE=0.1
RANDOM_STATE=42

# ============================================================================
# Notification Configuration
# ============================================================================
NOTIFICATION_EMAIL=mlops@example.com
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# ============================================================================
# Logging Configuration
# ============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# ============================================================================
# Security (for production)
# ============================================================================
# TODO: Set strong passwords for production
# TODO: Enable MLflow authentication
# TODO: Configure SSL/TLS

# ============================================================================
# GPU Configuration (if available)
# ============================================================================
CUDA_VISIBLE_DEVICES=0
# Set to empty string to use CPU: CUDA_VISIBLE_DEVICES=

# ============================================================================
# Development vs Production
# ============================================================================
ENVIRONMENT=development
# Options: development, staging, production

# ============================================================================
# Feature Flags
# ============================================================================
ENABLE_DATA_VALIDATION=true
ENABLE_DVC_VERSIONING=true
ENABLE_MODEL_REGISTRY=true
ENABLE_NOTIFICATIONS=true

# ============================================================================
# Performance Tuning
# ============================================================================
NUM_WORKERS=4  # DataLoader workers
PREFETCH_FACTOR=2  # DataLoader prefetch

# ============================================================================
# Instructions
# ============================================================================
# 1. Copy this file: cp .env.example .env
# 2. Update all "your-*-here" values
# 3. Generate Fernet key:
#    python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# 4. Never commit .env to git!
